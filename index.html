<!DOCTYPE html>
<!-- saved from url=(0028)https://lxp.eschool.mn/login -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">.t16y9g8l700-beta11{appearance:none;background-color:var(--rdg-background-color);block-size:100%;border:2px solid #ccc;box-sizing:border-box;color:var(--rdg-color);font-family:inherit;font-size:var(--rdg-font-size);inline-size:100%;padding-block:0;padding-inline:6px;vertical-align:top}.t16y9g8l700-beta11:focus{border-color:var(--rdg-selection-color);outline:none}.t16y9g8l700-beta11::placeholder{color:#999;opacity:1}</style><style type="text/css">.a888944700-beta11{fill:currentColor}.a888944700-beta11>path{transition:d .1s}</style><style type="text/css">.cadd3bp700-beta11{background-color:var(--rdg-selection-color);block-size:8px;cursor:move;inline-size:8px;inset-block-end:0;inset-inline-end:0;position:absolute}.cadd3bp700-beta11:hover{background-color:var(--rdg-background-color);block-size:16px;border:2px solid var(--rdg-selection-color);inline-size:16px}</style><style type="text/css">.c1tngyp1700-beta11.rdg-cell{padding:0}</style><style type="text/css">.snfqesz700-beta11.r1otpg64700-beta11{line-height:var(--rdg-summary-row-height)}.snfqesz700-beta11.r1otpg64700-beta11>.c1wupbe700-beta11{position:sticky}.s1jijrjz700-beta11>.c1wupbe700-beta11{border-block-start:2px solid var(--rdg-summary-border-color)}</style><style type="text/css">.s1n3hxke700-beta11{inset-block-end:var(--rdg-summary-row-bottom);inset-block-start:var(--rdg-summary-row-top)}</style><style type="text/css">.gyxx7e9700-beta11:not([aria-selected=true]){background-color:var(--rdg-header-background-color)}.gyxx7e9700-beta11>.c1wupbe700-beta11:not(:last-child):not(.c9dpaye700-beta11){border-inline-end:none}</style><style type="text/css">.c1bmg16t700-beta11,.ccpfvsn700-beta11{background-color:#ccf}.c1bmg16t700-beta11.ccpfvsn700-beta11{background-color:#99f}</style><style type="text/css">.h197vzie700-beta11{background-color:var(--rdg-header-background-color);display:contents;font-weight:700;line-height:var(--rdg-header-row-height)}.h197vzie700-beta11>.c1wupbe700-beta11{inset-block-start:0;position:sticky;z-index:2}.h197vzie700-beta11>.c1730fa4700-beta11{z-index:3}</style><style type="text/css">.celq7o9700-beta11{touch-action:none}.celq7o9700-beta11:after{content:"";cursor:col-resize;inline-size:10px;inset-block-end:0;inset-block-start:0;inset-inline-end:0;position:absolute}</style><style type="text/css">.h1tr5c9i700-beta11{cursor:pointer;display:flex}.h1tr5c9i700-beta11:focus{outline:none}.h19r0msv700-beta11{flex-grow:1;overflow:hidden;overflow:clip;text-overflow:ellipsis}</style><style type="text/css">.gch972y700-beta11{outline:none}.cz2qf0d700-beta11{stroke:currentColor;stroke-width:1.5px;fill:transparent;margin-inline-start:4px;vertical-align:middle}.cz2qf0d700-beta11>path{transition:d .1s}</style><style type="text/css">.cd9l4jz700-beta11{align-items:center;cursor:pointer;display:flex;inset:0;justify-content:center;margin-inline-end:1px;position:absolute}.c1noyk41700-beta11{all:unset}.cdwjxv8700-beta11{background-color:var(--rdg-background-color);block-size:20px;border:2px solid var(--rdg-border-color);content:"";inline-size:20px}.c1noyk41700-beta11:checked+.cdwjxv8700-beta11{background-color:var(--rdg-checkbox-color);box-shadow:inset 0 0 0 4px var(--rdg-background-color)}.c1noyk41700-beta11:focus+.cdwjxv8700-beta11{border-color:var(--rdg-checkbox-focus-color)}.cca4mwn700-beta11{cursor:default}.cca4mwn700-beta11 .cdwjxv8700-beta11{background-color:var(--rdg-checkbox-disabled-background-color);border-color:var(--rdg-checkbox-disabled-border-color)}</style><style type="text/css">.r1otpg64700-beta11{background-color:var(--rdg-background-color);display:contents;line-height:var(--rdg-row-height)}.r1otpg64700-beta11:hover{background-color:var(--rdg-row-hover-background-color)}.r1otpg64700-beta11[aria-selected=true]{background-color:var(--rdg-row-selected-background-color)}.r1otpg64700-beta11[aria-selected=true]:hover{background-color:var(--row-selected-hover-background-color)}.rel5gk2700-beta11{outline:none}.rel5gk2700-beta11>.c1wupbe700-beta11{box-shadow:inset 0 2px 0 0 var(--rdg-selection-color),inset 0 -2px 0 0 var(--rdg-selection-color)}.rel5gk2700-beta11>.c1wupbe700-beta11:first-child{box-shadow:inset 0 2px 0 0 var(--rdg-selection-color),inset 0 -2px 0 0 var(--rdg-selection-color),inset calc(2px*var(--rdg-sign)) 0 0 0 var(--rdg-selection-color)}.rel5gk2700-beta11>.c1wupbe700-beta11:last-child{box-shadow:inset 0 2px 0 0 var(--rdg-selection-color),inset 0 -2px 0 0 var(--rdg-selection-color),inset calc(-2px*var(--rdg-sign)) 0 0 0 var(--rdg-selection-color)}.rel5gk2700-beta11>.c9dpaye700-beta11{box-shadow:inset 0 2px 0 0 var(--rdg-selection-color),inset 0 -2px 0 0 var(--rdg-selection-color),var(--rdg-frozen-cell-box-shadow)}</style><style type="text/css">.r104f42s700-beta11{--rdg-color:#000;--rdg-border-color:#ddd;--rdg-summary-border-color:#aaa;--rdg-background-color:#fff;--rdg-header-background-color:#f9f9f9;--rdg-row-hover-background-color:#f5f5f5;--rdg-row-selected-background-color:#dbecfa;--row-selected-hover-background-color:#c9e3f8;--rdg-checkbox-color:#005194;--rdg-checkbox-focus-color:#61b8ff;--rdg-checkbox-disabled-border-color:#ccc;--rdg-checkbox-disabled-background-color:#ddd;--rdg-selection-color:#66afe9;--rdg-frozen-cell-box-shadow:calc(2px*var(--rdg-sign)) 0 5px -2px hsla(0,0%,53%,.3);--rdg-font-size:14px;content-visibility:auto;background-color:var(--rdg-background-color);block-size:350px;border:1px solid var(--rdg-border-color);box-sizing:border-box;color:var(--rdg-color);color-scheme:var(--rdg-color-scheme,light dark);contain:strict;contain:size layout style paint;display:grid;font-size:var(--rdg-font-size);overflow:auto;user-select:none}@supports not (contain:strict){.r104f42s700-beta11{position:relative;z-index:0}}.r104f42s700-beta11 *,.r104f42s700-beta11 :after,.r104f42s700-beta11 :before{box-sizing:inherit}.r104f42s700-beta11:before{block-size:var(--rdg-grid-block-size);content:"";inline-size:var(--rdg-grid-inline-size);inset-block-start:0;inset-inline-start:0;position:absolute}.r104f42s700-beta11.rdg-dark{--rdg-color-scheme:dark;--rdg-color:#ddd;--rdg-border-color:#444;--rdg-summary-border-color:#555;--rdg-background-color:#212121;--rdg-header-background-color:#1b1b1b;--rdg-row-hover-background-color:#171717;--rdg-row-selected-background-color:#1a73bc;--row-selected-hover-background-color:#1768ab;--rdg-checkbox-color:#94cfff;--rdg-checkbox-focus-color:#c7e6ff;--rdg-checkbox-disabled-border-color:#000;--rdg-checkbox-disabled-background-color:#333}.r104f42s700-beta11.rdg-light{--rdg-color-scheme:light}@media (prefers-color-scheme:dark){.r104f42s700-beta11:not(.rdg-light){--rdg-color:#ddd;--rdg-border-color:#444;--rdg-summary-border-color:#555;--rdg-background-color:#212121;--rdg-header-background-color:#1b1b1b;--rdg-row-hover-background-color:#171717;--rdg-row-selected-background-color:#1a73bc;--row-selected-hover-background-color:#1768ab;--rdg-checkbox-color:#94cfff;--rdg-checkbox-focus-color:#c7e6ff;--rdg-checkbox-disabled-border-color:#000;--rdg-checkbox-disabled-background-color:#333}}.v7ly7s700-beta11.r1otpg64700-beta11{cursor:move}.fc4f4zb700-beta11{grid-column-start:1;inset-inline-start:0;position:sticky}</style><style type="text/css">.c1wupbe700-beta11{background-color:inherit;border-block-end:1px solid var(--rdg-border-color);border-inline-end:1px solid var(--rdg-border-color);contain:strict;contain:size layout style paint;grid-row-start:var(--rdg-grid-row-start);outline:none;overflow:hidden;overflow:clip;padding-block:0;padding-inline:8px;text-overflow:ellipsis;white-space:nowrap}.c1wupbe700-beta11[aria-selected=true]{box-shadow:inset 0 0 0 2px var(--rdg-selection-color)}.cd0kgiy700-beta11 .c1wupbe700-beta11{contain:content}.c1730fa4700-beta11{position:sticky;z-index:1}.c9dpaye700-beta11{box-shadow:var(--rdg-frozen-cell-box-shadow)}</style>
        
        <title>eSchool LXP</title>
        <link rel="apple-touch-icon" sizes="180x180" href="https://lxp.eschool.mn/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://lxp.eschool.mn/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="194x194" href="https://lxp.eschool.mn/favicons/favicon-194x194.png">
        <link rel="icon" type="image/png" sizes="192x192" href="https://lxp.eschool.mn/favicons/android-chrome-192x192.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://lxp.eschool.mn/favicons/favicon-16x16.png">
        <link rel="manifest" href="https://lxp.eschool.mn/favicons/site.webmanifest">
        <link rel="mask-icon" href="https://lxp.eschool.mn/favicons/safari-pinned-tab.svg" color="#ff5b1d">
        <link rel="shortcut icon" href="https://lxp.eschool.mn/favicons/favicon.ico">
        <meta name="apple-mobile-web-app-title" content="eSchool LXP">
        <meta name="application-name" content="eSchool LXP">
        <meta name="msapplication-TileColor" content="#ff5b1d">
        <meta name="msapplication-TileImage" content="/favicons/mstile-144x144.png">
        <meta name="msapplication-config" content="/favicons/browserconfig.xml">
        <meta name="theme-color" content="#ff5b1d">

                    <link rel="stylesheet" href="./eSchool LXP_files/pinnacle.12bb2790.css">
            <link rel="stylesheet" href="./eSchool LXP_files/mulish.64df03d6.css">
        
                        <link rel="stylesheet" href="./eSchool LXP_files/vendor.614fc4c9.css">
            <link rel="stylesheet" href="./eSchool LXP_files/style.72409102.css">
            <link rel="stylesheet" href="./eSchool LXP_files/main.cc5031e3.css">
            <link rel="stylesheet" href="./eSchool LXP_files/semantic.96ace566.css">
            <link rel="stylesheet" href="./eSchool LXP_files/datepicker.ef7a7537.css">
            <link rel="stylesheet" href="./eSchool LXP_files/timepicker.b5757859.css">
            <link rel="stylesheet" href="./eSchool LXP_files/rctree.fc1ade0d.css">
            <link rel="stylesheet" href="./eSchool LXP_files/reactcrop.2bd57e25.css">
            <link rel="stylesheet" href="./eSchool LXP_files/fullcalendar.23ff5a90.css">
            <link rel="stylesheet" href="./eSchool LXP_files/datatable.c918eb17.css">
            <link rel="stylesheet" href="./eSchool LXP_files/datatableold.c1b79d82.css">
            <link rel="stylesheet" href="./eSchool LXP_files/reactbootstraptable2.3c715ded.css">
        
    <link rel="stylesheet" href="./eSchool LXP_files/login.d0d663e3.css">

                    <script src="./eSchool LXP_files/runtime.b3a4da0f.js.download" defer=""></script><script src="./eSchool LXP_files/580.901aa16d.js.download" defer=""></script><script src="./eSchool LXP_files/app.c88b5724.js.download" defer=""></script>
            <script src="./eSchool LXP_files/js" async=""></script></head>
    <body style="overflow-x: auto;" class="m-page--fluid m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default m-header--minimize-off">
        
    <!-- Main -->
    <section class="container-fluid p-0 h-100 position-relative">
        <div class="row no-gutters h-100">

            <div class="offset-0 col-12 d-none d-lg-flex col-lg h-100">
                <img id="image" style="object-fit: cover; height: 1707px;" src="./eSchool LXP_files/login.webp" class="w-100" alt="background image">
            </div>

            <div class="col-12 col-lg-auto h-100 pb-5 px-4 pt-0 p-lg-0">
                <div id="container" class="min-h-100 d-flex justify-content-center align-items-center py-5 m-portlet m-0">
                    <div style="padding-right:3rem; padding-left:3rem;" class="m-portlet__body">

                        <div class="align-content-center align-items-center d-flex justify-content-center sh-11">
                            <img class="login-logo" onclick="toHome()" src="./eSchool LXP_files/eschool-lxp-logo.png" alt="eschool lxp logo">
                        </div>

                        <form class="login-form" action="https://lxp.eschool.mn/login" method="post" id="login_form">
                            <div class="d-flex flex-row-reverse mt-5 mb-2 ">
                                <select id="langSelect" onchange="changeLang()" class="language-dropdown">
                                    <option value="en">EN</option>
                                    <option selected="" value="mn">MN</option>
                                </select>
                            </div>

                            
                            <input type="hidden" name="_csrf_token" value="4b87075.JquDe2jm7pQtP21oApVaOBCKRlJCVf5OoGPezvbitNk.R_POAySAi9N4ByghR_gwCEPMEwU1E8sAkS7tir2E358Xx_oOEI-vpVsIIA">
                            <input type="hidden" name="lang" value="mn">

                            <div class="login-input-wrapper">
                                <svg class="login-input-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true">
                                    <path d="M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z"></path>
                                </svg>
                                <input name="_username" type="text" class="form-control login-input" id="username" tabindex="1" placeholder="Утасны дугаар" value="" required="">
                            </div>

                            <div class="login-input-wrapper">
                                <svg class="login-input-icon" focusable="false" viewBox="0 0 24 24" aria-hidden="true">
                                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"></path>
                                </svg>
                                <input name="_password" type="password" class="form-control login-input" id="password" tabindex="2" placeholder="Нууц үг" required="" autocomplete="off">
                            </div>

                            <div class="mb-3">
                                <input class="login-checkbox" type="checkbox" id="remember_me" name="_remember_me" tabindex="3">
                                <label for="remember_me" class="login-checkbox-label">
                                    Намайг санаарай
                                </label>
                            </div>

                            <button type="submit" class="btn btn-info m-btn--pill text-uppercase w-100" tabindex="4" style="height:40px; font-size:14px; font-family: PinnacleBold !important">
                                Нэвтрэх
                            </button>
                        </form>

                        <div class="login-sso-wrapper">
                            <button onclick="toGoogle()" style="font-size:9.8px; color:#343a40 !important" type="button" class="btn m-btn--pill btn-outline-metal login-sso-button">
                                <img class="login-sso-image" src="./eSchool LXP_files/googleSSO.png" alt="google">
                                Google хаягаар нэвтрэх

                            </button>
                            <button onclick="toMicrosoft()" style="font-size:9.8px; color:#343a40 !important" type="button" class="btn m-btn--pill btn-outline-metal login-sso-button">
                                <img class="login-sso-image" src="./eSchool LXP_files/microsoftSSO.png" alt="microsoft">
                                Microsoft хаягаар нэвтрэх
                            </button>
                        </div>

                        <div class="d-flex align-items-center flex-column justify-content-between mb-5" style="margin-top:150px;">
                            <button onclick="toForgotPassword()" id="forgot-password" type="button" class="btn m-btn--pill btn-outline-danger pinnacle-regular" style="font-size:14px;">
                                Нууц үгээ мартсан бол энд дарна уу.
                            </button>
                        </div>

                        <div class="d-flex align-items-center flex-column justify-content-between">
                            <p id="copyright" class="login-copyright" style="top: 1667px;">
                                c2023.
                                Дижитал Эдү Менежмент ХХК
                            </p>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>

    <section>
    <div id="modal" class="ui page modals dimmer transition visible active" style="display: none!important;">
        <div class="ui small modal transition visible active react-modal overflow-modal">
            <div class="header">
                Нууц үг сэргээх
                <button type="button" class="close" onclick="closeModal()">
                    <i class="la la-close"></i>
                </button>
            </div>

            <div id="main" class="content">

                <div class="form-group m-form__group row">
                    <label class="col-5 col-form-label text-right label-pinnacle-bold">
                            Бүртгэлтэй утасны дугаар
                    </label>
                    <div class="col-5">
                        <input type="number" class="form-control" id="phoneNumber">
                    </div>
                 </div>

            </div>

            <div class="actions modal-footer">
                <div id="footer" class="col-12 text-center">
                    <button onclick="closeModal()" class="btn m-btn--pill btn-outline-metal text-uppercase margin-right-5">
                        Хаах
                    </button>
                    <button id="primaryButton" onclick="validateStaffCredentials()" class="btn m-btn--pill btn-success text-uppercase">
                        Баталгаажуулах код авах
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<script type="text/javascript">
        const main = document.getElementById('main')
        const modal = document.getElementById('modal')
        const footer = document.getElementById('footer')
        const primaryButton = document.getElementById('primaryButton')

        function createLoader() {
            if(!document?.getElementById('loader')) {
                const div = document.createElement("div")
                div.setAttribute('id', 'loader')
                const block = document.createElement("div")
                block.classList.add("blockUI", "blockOverlay")
                const wrapper = document.createElement("div")
                wrapper.classList.add("blockUI", "blockMsg", "blockPage")
                const loader =  document.createElement("div")
                loader.classList.add("m-loader", "m-loader--brand", "m-loader--lg")
                wrapper.append(loader)
                div.append(block)
                div.append(wrapper)
                modal.append(div)
            }
        }

        function removeLoader() {
            document?.getElementById('loader')?.remove()
        }

        function createErrorMessage(error) {
            const div = document.getElementById('errorMessage')
            if(div) {
                div.innerText = error
            } else {
                const div = document.createElement("div")
                div.classList.add("alert", "alert-danger",)
                div.setAttribute('id', 'errorMessage')
                div.innerText = error
                main.prepend(div)
            }
        }

        function createSuccessMessage(success) {
            if(!document.getElementById('successMessage')) {
                removeSuccessMessage()
                const div = document.createElement("div")
                div.classList.add("alert", "alert-success",)
                div.setAttribute('id', 'successMessage')
                div.innerText = 'Таны нууц үг амжилттай сэргээгдлээ'
                main.prepend(div)
                let timeLeft = 10
                setTimeout(function() {
                    let waitingTimer = setInterval(function() {
                        if(timeLeft <= 0) {
                            clearInterval(waitingTimer)
                            removeSuccessMessage()
                            closeModal()
                        }
                        div.innerText = 'Та шинэ нууц үгээрээ нэвтэрнэ үү' +' '+  timeLeft
                        timeLeft -= 1
                    }, 1000) 
                }, 5000)
            }
        }

        function createGetConfirmationCodeButton() {
            if(!document?.getElementById("getConfirmationCode")) {
                const button = document.createElement("button")
                button.classList.add("btn", "m-btn--pill", "btn-publish", "ext-uppercase", "margin-right-5")
                button.setAttribute('id', 'getConfirmationCode')
                button.setAttribute('onClick', 'validateStaffCredentials()')
                button.append(document.createTextNode('Баталгаажуулах код авах'))
                footer.children[0].after(button)
            }
        }

        function removeGetConfirmationCodeButton() {
            document?.getElementById("getConfirmationCode")?.remove()
        }

        function createWaitingMessage() {
            if(!document.getElementById('waitingMessage')) {
                removeErrorMessage()
                const div = document.createElement("div")
                div.classList.add("alert", "alert-info",)
                div.setAttribute('id', 'waitingMessage')
                div.innerText = 'Таны бүртгэлтэй дугаар руу баталгаажуулах код явуулсан.'
                main.prepend(div)
                let timeLeft = 60
                setTimeout(function() {
                    let waitingTimer = setInterval(function() {
                        if(timeLeft <= 0 && document.getElementById('waitingMessage')) {
                            clearInterval(waitingTimer)
                            removeWaitingMessage()
                            createGetConfirmationCodeButton()
                        }
                        div.innerText = 'Дахин баталгаажуулах код авах боломжит хугацаа' +' '+ timeLeft
                        timeLeft -= 1
                    }, 1000) 
                }, 5000)
            }
        }

        function removeWaitingMessage() {
            document?.getElementById('waitingMessage')?.remove()
        } 

        function removeErrorMessage() {
            document?.getElementById('errorMessage')?.remove()
        }

        function removeSuccessMessage() {
            document?.getElementById('successMessage')?.remove()
        } 

        function closeModal() {
            modal.style.setProperty('display', 'none', 'important')
            document.getElementById('phoneNumber').value = null
            removeErrorMessage()
            removeConfirmationField()
            removeLoader()
            removePasswordFields()
            changeBackPrimaryButtonMethod()
            removeGetConfirmationCodeButton()
            removeWaitingMessage()
            removeSuccessMessage()
        }

        function changePrimaryButtonMethod() {
            primaryButton.setAttribute('onClick', 'validateStaffNewPassword()')
            primaryButton.innerText = 'Нууц үг сэргээх'
        }

        function changeBackPrimaryButtonMethod() {
            primaryButton.setAttribute('onClick', 'validateStaffCredentials()')
            primaryButton.innerText = 'Баталгаажуулах код авах'
        }

        function validateStaffCredentials() {
            let phoneNumber = document.getElementById('phoneNumber').value
            
            const re = /^[8|9][0-9]{7}$/;

            if (!re.test(phoneNumber)) {
                error = 'Талбаруудыг бүрэн бөглөнө үү'
                createErrorMessage(error)
            } else {
                removeErrorMessage()
                submitStaffCredentials(phoneNumber)
            }
        }

        function validateStaffNewPassword() {
            let phoneNumber = document.getElementById('phoneNumber').value
            let newPassword = document.getElementById('newPassword').value
            let newPasswordRepeat = document.getElementById('newPasswordRepeat').value
            let confirmationCode = document.getElementById('confirmationCode').value

            const re = /^[0-9]+$/;

            if(!re.test(confirmationCode)) {
                error = 'Талбаруудыг бүрэн бөглөнө үү'
                return createErrorMessage(error)
            }

            if(newPassword.length < 3) {
                error = 'Нууц үг нь 4 болон түүнээс дээш оронтой байх ёстой'
               return createErrorMessage(error)
            }

            if(newPassword !== newPasswordRepeat) {
                error = 'Давтан оруулсан нууц үг ижил байх ёстой'
               return createErrorMessage(error)
            }
            removeErrorMessage()
            submitStaffNewPassword(phoneNumber, confirmationCode, newPassword, newPasswordRepeat)
        }

        function createConfirmationField() {
            if(!document?.getElementById("confirmationField")) {
                const div = document.createElement("div")
                div.classList.add("form-group", "m-form__group", "row")
                div.setAttribute('id', 'confirmationField')
                const label = document.createElement("label")
                label.classList.add("col-5", "col-form-label", "text-right", "label-pinnacle-bold")
                label.append(document.createTextNode('Баталгаажуулах код'))
                const wrapper = document.createElement("div")
                wrapper.classList.add("col-5")
                const input = document.createElement("input")
                input.classList.add("form-control")
                input.setAttribute('id', 'confirmationCode')
                input.setAttribute('type', 'number')
                wrapper.append(input)
                div.append(label)
                div.append(wrapper)
                main.append(div)
            }
        }

        function removeConfirmationField() {
            document?.getElementById("confirmationField")?.remove()
        }

        function createPasswordFields() {
            if(!document?.getElementById("passwordField")) {
                const parentDiv = document.createElement("div")
                parentDiv.setAttribute('id', 'passwordField')
                const row = document.createElement("div")
                row.classList.add("form-group", "m-form__group", "row")
                const label = document.createElement("label")
                label.classList.add("col-5", "col-form-label", "text-right", "label-pinnacle-bold")
                label.append(document.createTextNode('Шинэ нууц үг'))
                const wrapper = document.createElement("div")
                wrapper.classList.add("col-5")
                const input = document.createElement("input")
                input.classList.add("form-control")
                input.setAttribute('id', 'newPassword')
                input.setAttribute('type', 'password')
                wrapper.append(input)
                row.append(label)
                row.append(wrapper)
                parentDiv.append(row)
                const rowRepeat = document.createElement("div")
                rowRepeat.classList.add("form-group", "m-form__group", "row")
                const labelRepeat = document.createElement("label")
                labelRepeat.classList.add("col-5", "col-form-label", "text-right", "label-pinnacle-bold")
                labelRepeat.append(document.createTextNode('Шинэ нууц үг давтах'))
                const wrapperRepeat = document.createElement("div")
                wrapperRepeat.classList.add("col-5")
                const inputRepeat = document.createElement("input")
                inputRepeat.classList.add("form-control")
                inputRepeat.setAttribute('id', 'newPasswordRepeat')
                inputRepeat.setAttribute('type', 'password')
                wrapperRepeat.append(inputRepeat)
                rowRepeat.append(labelRepeat)
                rowRepeat.append(wrapperRepeat)
                parentDiv.append(rowRepeat)
                main.append(parentDiv)
            }
        }

        function removePasswordFields() {
            document?.getElementById("passwordField")?.remove()
        }

        function submitStaffCredentials(phoneNumber) {
            createLoader()
            var params = {
                username: phoneNumber,
            };
            const formData = new FormData()
            formData.append( "data", JSON.stringify( params ) );
            fetch(window.location.origin + '/recover', {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                    },
                    body: formData
                })
                    .then((res) => {
                        if (res.ok) {
                            return res.json()
                        } else {
                            error = 'Хүсэлт илгээхэд алдаа гарлаа'
                            createErrorMessage(error)
                            removeLoader()
                        }
                    })
                    .then((res) => {
                        if(res.success) {
                            createConfirmationField()
                            createPasswordFields()
                            createWaitingMessage()
                            removeGetConfirmationCodeButton()
                            changePrimaryButtonMethod()
                        } else {
                            createErrorMessage(res.data.message)
                        }
                            removeLoader()
                    })
                    .catch((e) => {
                        error = 'Хүсэлт илгээхэд алдаа гарлаа'
                        createErrorMessage(error)
                        removeLoader()
                    })
        }

        function submitStaffNewPassword(username, confirmationCode, newPassword, newPasswordRepeat) {
            createLoader()
            var params = {
                username,
                confirmationCode,
                newPassword,
                newPasswordRepeat
            };
            const formData = new FormData()
            formData.append( "data", JSON.stringify( params ) );
            fetch(window.location.origin + '/reset-password', {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                    },
                    body: formData
                })
                    .then((res) => {
                        if (res.ok) {
                            return res.json()
                        } else {
                            error = 'Хүсэлт илгээхэд алдаа гарлаа'
                            createErrorMessage(error)
                            removeLoader()
                        }
                    })
                    .then((res) => {
                        if (res.success) {
                            createSuccessMessage(res.data.message)
                            document.getElementById('phoneNumber').value = null
                            removeErrorMessage()
                            removeConfirmationField()
                            removePasswordFields()
                            changeBackPrimaryButtonMethod()
                            removeGetConfirmationCodeButton()
                            removeWaitingMessage()
                        } else {
                            createErrorMessage(res.data.message)
                        }
                        removeLoader()
                    })
                    .catch((e) => {
                        error = 'Хүсэлт илгээхэд алдаа гарлаа'
                        createErrorMessage(error)
                        removeLoader()
                    })
        }

</script>

   <script type="text/javascript">
        
       localStorage.clear()

       function toHome() {
           window.location.href = location.origin
       }

       function toGoogle() {
           window.location.href = '/login/google'
       }

       function toMicrosoft() {
           window.location.href = '/login/microsoft'
       }
       
       function toForgotPassword() {
            const modal = document.getElementById('modal')
            modal.style.setProperty('display', 'flex', 'important')
       }

       function handleResize(){
           const image = document.getElementById('image')
           const copyright = document.getElementById('copyright')
           image.style.height = document.getElementById('container').clientHeight + 'px'
           copyright.style.top = document.getElementById('container').clientHeight - 40 + 'px'
       }

       window.addEventListener("resize", handleResize);

       handleResize();

       function changeLang() {
            const selectedLang = document.getElementById("langSelect").value;
            const currentLang = 'mn';
            if (selectedLang.toLowerCase() !== currentLang.toLowerCase()) {
                let params = {
                    langCode: selectedLang,
                };
                const formData = new FormData()
                formData.append( "data", JSON.stringify(params));
                fetch(window.location.origin + '/change-language', {
                        method: 'POST',
                        headers: {
                            'Accept': 'application/json',
                        },
                        body: formData
                    })
                    .then((res) => {
                        return res.json()
                    })
                    .then((res) => {
                        if (res.success) {
                            toHome()
                        }
                    })
            } 
       }
   </script>
    


</body></html>
